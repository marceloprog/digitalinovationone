# DIO - Microsoft Certification Challenge #5 - AI 102
www.dio.me

## Desafio de projeto
Desenvolver um tradutor de textos, documentos e blockchain no Azure.


## Contexto
O projeto tem as seguintes soluções

1. Tradutor de textos
2. Tradutor de Documentos, no caso foi traduzido o documento musica_brunomars.docx
3. Extraindo e traduzindo textos de um artigo na internet
4. BlockChain


## codigo do projeto
# -*- coding: utf-8 -*-
"""dio-tradutor-texto-artigo.ipynb

Automatically generated by Colab.

Original file is located at
    https://colab.research.google.com/drive/16ledHdZpXNzBu0pY_Se0HmkfcBAcpyt6
"""

!pip install requests python-docx

import requests
from docx import Document
import os
subscription_key = "f89feef1-2e27-43e2-9aa8-41c3686a7a1a"
endpoint = 'https://api.cognitive.microsofttranslator.com'
location =  "eastus2"
language_destination = 'pt-br'

def translator_text(text, target_language):
    path = '/translate'
    constructed_url = endpoint + path
    headers = {
        'Ocp-Apim-Subscription-Key': subscription_key,
        'Ocp-Apim-Subscription-Region' : location,
        'Content-type' :  'application/json',
        'X-ClientTraceId' : str(os.urandom(16))
    }
    body = [{
        'text' : text
    }]
    params = {
        'api-version' : '2024-12-01-preview',
        'from' : 'en',
        'to' : language_destination
    }
    request = requests.post(constructed_url, params=params, headers=headers, json=body)
    response=request.json()
    return response[0]["translations"][0]["text"]

translator_text("I know you're somewhere out there, somewhere far away",language_destination)

def translate_document(path):
  document = Document(path)
  full_text = []
  for paragraph in document.paragraphs:
        translated_text = translator_text(paragraph.text, language_destination)
        full_text.append(translated_text)

  translated_doc = Document()
  for line in full_text:
      translated_doc.add_paragraph(line)
  path_translated = path.replace(".docx", f"_{language_destination}.docx")
  translated_doc.save(path_translated)
  return path_translated

input_file="/content/musica_brunomars.docx"
translate_document(input_file)

!pip install requests beautifulsoup4 openai langchain-openai

import requests
from bs4 import BeautifulSoup
def extract_text_from_url(url):
  response = requests.get(url)
  if response.status_code == 200:
    soup = BeautifulSoup(response.text, 'html.parser')
    for script_or_style in soup(['script', 'style']) :
      script_or_style.decompose()
      texto =  soup.get_text(separator =  ' ')
      linhas = (line.strip() for line in texto.splitlines())
      parts = (phrase.strip() for line in linhas for phrase in line.split(" "))
      texto_limpo = '\n'.join(part for part in parts if part)
    return texto_limpo
  else:
     print(f"failed to fetch the URL. Status code: {response.status_code}")
     return None

  text = soup.get_text()
  return text

extract_text_from_url('https://dev.to/devteam/join-the-new-year-new-you-portfolio-challenge-3000-in-prizes-feedback-from-google-ai-team-4e7g')

from langchain_core import messages
from langchain_openai.chat_models.azure import AzureChatOpenAI
client = AzureChatOpenAI(
  azure_endpoint= "https://oaidiobootcampeaest.openai.azure.com/",
  api_key = "3iwrzHLYe4BS3jwgSA2WlvhSn2h00XxTNTrVaSHDuKJ1nm44mhh9JQQJ99CAACHYHv6XJ3w3AAABACOGfd7m",
  api_version = "2024-12-01-preview",
  deployment_name = "gpt-4o-mini",
  max_retries = 0
)
def translate_article(text, lang):
  messages = [
      ("system", "você atua como tradutor de textos"),
      ("user", f"Traduza o {text} para o idioma {lang} e responda para o markdown")
  ]
  response = client.invoke(messages)
  print(response.content)
  return response.content

  translate_article("We're thrilled to kick off 2026 with our newest challenge presented by","português")

url = "https://dev.to/devteam/join-the-new-year-new-you-portfolio-challenge-3000-in-prizes-feedback-from-google-ai-team-4e7g"
text = extract_text_from_url(url)
article = translate_article(text, "pt-br")
print(article)